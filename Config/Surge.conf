[General]
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
proxy-test-url = http://www.apple.com/library/test/success.html
test-timeout = 2
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-only-cn-private.mmdb
ipv6 = true
ipv6-vif = auto
exclude-simple-hostnames = true
dns-server = system
read-etc-hosts = true
show-error-page-for-reject = true
hijack-dns = *:53
udp-policy-not-supported-behaviour = REJECT
loglevel = warning

[Proxy Group]
Final = select, "🇭🇰 HK", "🇯🇵 JP", Select, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png
Select = select, include-all-proxies=0, no-alert=0, hidden=0, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png, update-interval=0, include-other-group="Viking, 7li7li"
AI = select, "🇺🇸 US", "🇪🇺 EU", Select, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png
Streaming!CN = select, Final, Select, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/DisneyPlus.png
StreamingCN = select, DIRECT, Select, "🇭🇰 HK", no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Bili.png
CDN & Download = select, Final, Select, DIRECT, no-alert=0, hidden=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Microsoft.png
🇭🇰 HK = smart, policy-regex-filter=^(?=.*((?i)(🇭🇰|🇹🇼|🇲🇴|香港|台湾|澳门|\b(HK|Hong|TW|Tai|Taiwan|MO|Macao)\b)))(?!.*((?i)\b(GAME|HOME|EMBY)\b)).*$, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=Select, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
🇯🇵 JP = smart, policy-regex-filter=^(?=.*((?i)(🇯🇵|🇰🇷|日本|韩国|\b(JP|Japan|KR|Korea)\b)))(?!.*((?i)\b(GAME|HOME|EMBY)\b)).*$, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=Select, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
🇸🇬 SG = smart, policy-regex-filter=^(?=.*((?i)(🇸🇬|新加坡|狮|\b(SG|Singapore)\b)))(?!.*((?i)\b(GAME|HOME|EMBY)\b)).*$, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=Select, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
🇺🇸 US = smart, policy-regex-filter=^(?=.*((?i)(🇺🇸|美国|\b(US|United States)\b)))(?!.*((?i)\b(GAME|HOME|EMBY)\b)).*$, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=Select, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png
🇪🇺 EU = smart, policy-regex-filter=(?i)^(?!.*emby).*(🇧🇪|🇧🇬|🇨🇿|🇩🇰|🇩🇪|🇪🇪|🇮🇪|🇬🇷|🇪🇸|🇫🇷|🇭🇷|🇮🇹|🇨🇾|🇱🇻|🇱🇹|🇱🇺|🇭🇺|🇲🇹|🇳🇱|🇦🇹|🇵🇱|🇵🇹|🇷🇴|🇸🇮|🇸🇰|🇫🇮|🇸🇪|🇨🇭|🇬🇧|🇪🇺).*, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=Select, icon-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/DE.png
Viking = select, policy-path=https://sub.store/download/Viking?target=Surge, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/ViKinglinks.png
7li7li = select, policy-path=https://sub.store/download/7li7li-H?target=Surge, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/black2c7/TheMagic-Icons/main/Icons/VPS31.png

[Rule]
# Direct+
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Direct+.list,DIRECT,extended-matching
# Reject
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Advertising.list,REJECT,pre-matching,extended-matching
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Tracking.list,REJECT,pre-matching,extended-matching
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Malicious.list,REJECT,pre-matching,extended-matching
# FQNovel Ad
RULE-SET,https://raw.githubusercontent.com/EAlyce/conf/main/Rule/FQNovelAdvertising.list,REJECT,pre-matching,extended-matching
# AI
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/AI.list,AI,extended-matching
# Emby
RULE-SET,https://raw.githubusercontent.com/yugubbk/Surge/master/Source/Emby.list,Streaming!CN,extended-matching
# Telegram ASN
IP-ASN,59930,"🇺🇸 US",no-resolve // Telegram DC1
IP-ASN,62014,"🇸🇬 SG",no-resolve // Telegram DC5
IP-ASN,62041,"🇪🇺 EU",no-resolve // Telegram DC4
PROCESS-NAME,Telegram,REJECT-DROP
# Streaming!CN
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Streaming/!CN.list,Streaming!CN,extended-matching
# StreamingCN
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Streaming/CN.list,StreamingCN,extended-matching
# Static CDN
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,"CDN & Download",extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,"CDN & Download",extended-matching
# Apple & Microsoft Domestic CDN
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/apple_cdn.conf,"CDN & Download",extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf,"CDN & Download",extended-matching
# Software Game Driver Download
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/download.conf,"CDN & Download",extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/download.conf,"CDN & Download",extended-matching
# Proxy
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Proxy.list,Final,extended-matching
# Direct
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Direct.list,DIRECT,extended-matching
# Local Area Network
RULE-SET,LAN,DIRECT
# DNSHijacking
RULE-SET,https://raw.githubusercontent.com/yugubbk/Surge/master/Source/DNSHijacking.list,Final
# GeoIP China
GEOIP,CN,DIRECT
# FINAL
FINAL,Final,dns-failed

[URL Rewrite]
# Redirect Google Search Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com header

[MITM]
skip-server-cert-verify = true
h2 = true
hostname = www.google.cn
